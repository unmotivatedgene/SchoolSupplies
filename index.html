<!DOCTYPE html>
<html lang="en">

<head>
    <script>
        // JSON data
        const data = {
              "Items": {
                "BabyWipes": {
                    "Name": "Baby Wipes",
                    "Unit": ["Package","Packages"],
                    "Count": 80
                },
                "Binder_1in": {
                    "Name": "Binder – 1 in. 3 ring",
                    "Unit": [],
                    "Count": 1
                },
                "ColoredPencils": {
                    "Name": "Colored Pencils",
                    "Unit": ["Box", "Boxes"],
                    "Count": 12
                },
                "CompositionBook_WideRuled": {
                    "Name": "Composition Notebook – Wide Ruled",
                    "Unit": ["Book", "Books"],
                    "Count": 100
                },
                "ConstructionPaper": {
                    "Name": "Construction Paper - Assorted Colors",
                    "Unit": ["Pack", "Packs"],
                    "Count": 50
                },
                "Crayons_Crayola": {
                    "Name": "Crayons",
                    "Unit": ["Box", "Boxes"],
                    "Count": 24
                },
                "DishLiquid": {
                    "Name": "Dish Liquid",
                    "Unit": [],
                    "Count": 1
                },
                "DishwasherPods": {
                    "Name": "Dishwasher Pods",
                    "Unit": [],
                    "Count": 1
                },
                "DryEraseMarker_Chisel": {
                    "Name": "Dry Erase Marker - Chisel Tip",
                    "Unit": [],
                    "Count": 1
                },
                "DryEraseMarker_Fine": {
                    "Name": "Dry Erase Marker - Fine Tip",
                    "Unit": [],
                    "Count": 1
                },
                "EarbudAdapter": {
                    "Name": "Earbud Adapter - USB-C",
                    "Unit": [],
                    "Count": 1
                },
                "Earbuds": {
                    "Name": "Earbuds - Straight 3.5mm AUX",
                    "Unit": [],
                    "Count": 1
                },
                "Eraser_Cap": {
                    "Name": "Erasers - Pencil Cap",
                    "Unit": ["Pack", "Packs"],
                    "Count": 6
                },
                "Eraser_Pink": {
                    "Name": "Eraser - Pink",
                    "Unit": [],
                    "Count": 1
                },
                "FacialTissue": {
                    "Name": "Facial Tissue",
                    "Unit": ["Box","Boxes"],
                    "Count": 72
                },
                "Folder_Blue": {
                    "Name": "Folder - Blue (Brads & Pockets)",
                    "Unit": [],
                    "Count": 1
                },
                "Folder_Green": {
                    "Name": "Folder - Green (Brads & Pockets)",
                    "Unit": [],
                    "Count": 1
                },
                "Folder_Purple": {
                    "Name": "Folder - Purple (Brads & Pockets)",
                    "Unit": [],
                    "Count": 1
                },
                "Folder_Red": {
                    "Name": "Folder - Red (Brads & Pockets)",
                    "Unit": [],
                    "Count": 1
                },
                "Folder_Yellow": {
                    "Name": "Folder - Yellow (Brads & Pockets)",
                    "Unit": [],
                    "Count": 1
                },
                "Folder_Any": {
                    "Name": "Folder - Any Color (Brads & Pockets)",
                    "Unit": [],
                    "Count": 1
                },
                "Glue_Elmers": {
                    "Name": "Glue - Liquid",
                    "Unit": [],
                    "Count": 4
                },
                "GlueStick_Elmers": {
                    "Name": "Glue Stick",
                    "Unit": [],
                    "Count": 1
                },
                "GlueStick_Large": {
                    "Name": "Glue Stick - Large",
                    "Unit": [],
                    "Count": 1
                },
                "HandSoap": {
                    "Name": "Hand Soap",
                    "Unit": [],
                    "Count": 1
                },
                "Headphones_USBC": {
                    "Name": "Headphones USB-C",
                    "Unit": [],
                    "Count": 1
                },
                "Highlighter_Yellow": {
                    "Name": "Highlighter - Yellow",
                    "Unit": [],
                    "Count": 1
                },
                "Highlighter_Assorted": {
                    "Name": "Highlighters - Any Color",
                    "Unit": [],
                    "Count": 1
                },
                "Highlighter_Orange": {
                    "Name": "Highlighter - Orange",
                    "Unit": [],
                    "Count": 1
                },
                "LaundryDetergent": {
                    "Name": "Laundry Detergent",
                    "Unit": [],
                    "Count": 1
                },
                "ManilaPaper": {
                    "Name": "Manila Paper",
                    "Unit": ["Pack", "Packs"],
                    "Count": 50
                },
                "Markers_Crayola": {
                    "Name": "Markers Washable - Thick Tip",
                    "Unit": ["Box", "Boxes"],
                    "Count": 10
                },
                "NotebookPaper_WideRule": {
                    "Name": "Notebook Paper - Wide-Ruled",
                    "Unit": ["Pack","Packs"],
                    "Count": 1
                },
                "PaperPlates": {
                    "Name": "Paper Plates 9\" Uncoated",
                    "Unit": ["Pack", "Packs"],
                    "Count": 25
                },
                "PaperTowels": {
                    "Name": "Paper Towel - Roll",
                    "Unit": [],
                    "Count": 1
                },
                "PencilBag": {
                    "Name": "Pencil Bag - Clear Window with Grommets",
                    "Unit": [],
                    "Count": 1
                },
                "PencilBox": {
                    "Name": "Pencil Box - Plastic",
                    "Unit": [],
                    "Count": 1
                },
                "PencilSharpener": {
                    "Name": "Pencil Sharpener - Hand-held",
                    "Unit": [],
                    "Count": 1
                },
                "Pencils": {
                    "Name": "Pencils #2",
                    "Unit": [],
                    "Count": 1
                },
                "Pens_Black": {
                    "Name": "Pen - Black",
                    "Unit": [],
                    "Count": 1
                },
                "Pens_BlueOrBlack": {
                    "Name": "Pens Black or Blue",
                    "Unit": [],
                    "Count": 1
                },
                "PermanentMarker_Sharpie": {
                    "Name": "Permanent Marker - Fine Point Black",
                    "Unit": [],
                    "Count": 1
                },
                "PostItNotes": {
                    "Name": "Post-it Notes - 3\" x 3\"",
                    "Unit": ["Pad", "Pads"],
                    "Count": 50
                },
                "PrimaryCompositionBook": {
                    "Name": "Primary Composition Book - Red Baseline (100pgs)",
                    "Unit": [],
                    "Count": 1
                },
                "RedPens": {
                    "Name": "Pen - Red",
                    "Unit": [],
                    "Count": 1
                },
                "Ruler": {
                    "Name": "Ruler",
                    "Unit": [],
                    "Count": 1
                },
                "Scissors_Blunt": {
                    "Name": "Scissors - Blunt Tip",
                    "Unit": [],
                    "Count": 1
                },
                "Scissors_Pointed": {
                    "Name": "Scissors - Pointed Tip",
                    "Unit": [],
                    "Count": 1
                },
                "SpiralNotebook_Any": {
                    "Name": "Spiral Notebook - Wide Rule - Any Color (70pgs)",
                    "Unit": [],
                    "Count": 1
                },
                "SpiralNotebook_Green": {
                    "Name": "Spiral Notebook - Wide Rule - Green (70pgs)",
                    "Unit": [],
                    "Count": 1
                },
                "SpiralNotebook_Red": {
                    "Name": "Spiral Notebook - Wide Rule - Red (70pgs)",
                    "Unit": [],
                    "Count": 1
                },
                "SpiralNotebook_Yellow": {
                    "Name": "Spiral Notebook - Wide Rule - Yellow (70pgs)",
                    "Unit": [],
                    "Count": 1
                },
                "StorageBag_Gallon": {
                    "Name": "Storage Bags - Gallon",
                    "Unit": [],
                    "Count": 1
                },
                "StorageBag_Quart": {
                    "Name": "Storage Bags - Quart ",
                    "Unit": [],
                    "Count": 1
                },
                "StorageBag_Sandwich": {
                    "Name": "Storage Bags - Sandwich",
                    "Unit": ["Box", "Boxes"],
                    "Count": 50
                },
                "StorageBag_Snack": {
                    "Name": "Storage Bags - Snack",
                    "Unit": ["Box", "Boxes"],
                    "Count": 50
                },
                "Tape": {
                    "Name": "Tape",
                    "Unit": [],
                    "Count": 1
                },
                "Watercolors_Crayola": {
                    "Name": "Watercolors (8ct)",
                    "Unit": [],
                    "Count": 1
                }
            },
            "SchoolSupplies": {
                "Glen Rose ISD - Elementary": {
                    "Pre-K": {
                        "BabyWipes": { "Total": 2, "Sex": "Girls" },
                        "Crayons_Crayola": { "Total": 2 },
                        "FacialTissue": { "Total": 1 },
                        "Glue_Elmers": { "Total": 1 },
                        "GlueStick_Elmers": { "Total": 4 },
                        "Headphones_USBC": { "Total": 1 },
                        "Markers_Crayola": { "Total": 1 },
                        "PencilBox": { "Total": 1 },
                        "Scissors_Blunt": { "Total": 1 },
                        "StorageBag_Gallon": { "Total": 1, "Sex": "Girls" },
                        "StorageBag_Sandwich": { "Total": 1, "Sex": "Boys" }
                    },
                    "Kindergarten": {
                        "BabyWipes": { "Total": 1, "Sex": "Girls" },
                        "Crayons_Crayola": { "Total": 4 },
                        "DryEraseMarker_Fine": { "Total": 4 },
                        "Eraser_Pink": { "Total": 4 },
                        "FacialTissue": { "Total": 2 },
                        "Folder_Red": { "Total": 1 },
                        "Folder_Yellow": { "Total": 1 },
                        "Glue_Elmers": { "Total": 2 },
                        "GlueStick_Large": { "Total": 10 },
                        "Headphones_USBC": { "Total": 1 },
                        "Markers_Crayola": { "Total": 1 },
                        "PaperPlates": { "Total": 1, "Sex": "Boys" },
                        "Pencils": { "Total": 12 },
                        "PrimaryCompositionBook": { "Total": 1 },
                        "Scissors_Blunt": { "Total": 1 },
                        "StorageBag_Gallon": { "Total": 1, "Sex": "Boys" },
                        "StorageBag_Snack": { "Total": 1, "Sex": "Girls" },
                        "Watercolors_Crayola": { "Total": 1 }
                    },
                    "1st": {
                        "BabyWipes": { "Total": 1 },
                        "CompositionBook_WideRuled": { "Total": 1 },
                        "Crayons_Crayola": { "Total": 4 },
                        "DryEraseMarker_Fine": { "Total": 2 },
                        "Eraser_Pink": { "Total": 2 },
                        "FacialTissue": { "Total": 2 },
                        "Folder_Green": { "Total": 1 },
                        "Folder_Red": { "Total": 1 },
                        "Glue_Elmers": { "Total": 1 },
                        "GlueStick_Elmers": { "Total": 12 },
                        "Headphones_USBC": { "Total": 1 },
                        "Markers_Crayola": { "Total": 2 },
                        "PencilBox": { "Total": 1 },
                        "Pencils": { "Total": 12 },
                        "PermanentMarker_Sharpie": { "Total": 1 },
                        "PrimaryCompositionBook": { "Total": 1 },
                        "Scissors_Blunt": { "Total": 1 },
                        "StorageBag_Gallon": { "Total": 1, "Sex": "Boys" },
                        "StorageBag_Quart": { "Total": 1, "Sex": "Girls" },
                        "Watercolors_Crayola": { "Total": 2 }
                    },
                    "2nd": {
                        "Crayons_Crayola": { "Total": 3 },
                        "DryEraseMarker_Chisel": { "Total": 4 },
                        "Eraser_Pink": { "Total": 2 },
                        "FacialTissue": { "Total": 2 },
                        "Folder_Red": { "Total": 1 },
                        "Folder_Yellow": { "Total": 1 },
                        "Glue_Elmers": { "Total": 1 },
                        "GlueStick_Elmers": { "Total": 12 },
                        "Headphones_USBC": { "Total": 1 },
                        "Highlighter_Yellow": { "Total": 1 },
                        "Markers_Crayola": { "Total": 2 },
                        "PencilBox": { "Total": 1 },
                        "Pencils": { "Total": 36 },
                        "Scissors_Pointed": { "Total": 1 },
                        "SpiralNotebook_Green": { "Total": 1 },
                        "SpiralNotebook_Red": { "Total": 1 },
                        "SpiralNotebook_Yellow": { "Total": 1 },
                        "StorageBag_Gallon": { "Total": 1, "Sex": "Boys" },
                        "StorageBag_Quart": { "Total": 1, "Sex": "Girls" }
                    }
                },

                "Glen Rose ISD - Intermediate": {
                    "3rd": {
                        "Binder_1in": { "Total": 1 },
                        "ColoredPencils": { "Total": 2 },
                        "CompositionBook_WideRuled": { "Total": 4 },
                        "ConstructionPaper": { "Total": 1, "Sex": "Girls" },
                        "Crayons_Crayola": { "Total": 1 },
                        "Earbuds": { "Total": 1 },
                        "Eraser_Pink": { "Total": 2 },
                        "FacialTissue": { "Total": 4 },
                        "Folder_Blue": { "Total": 1 },
                        "Folder_Green": { "Total": 1 },
                        "Folder_Purple": { "Total": 1 },
                        "Folder_Red": { "Total": 1 },
                        "GlueStick_Elmers": { "Total": 24 },
                        "Highlighter_Assorted": { "Total": 4 },
                        "ManilaPaper": { "Total": 1, "Sex": "Boys" },
                        "NotebookPaper_WideRule": { "Total": 2 },
                        "PencilBag": { "Total": 1 },
                        "Pencils": { "Total": 48 },
                        "Scissors_Pointed": { "Total": 1 },
                        "SpiralNotebook_Any": { "Total": 4 }
                    },
                    "4th": {
                        "ColoredPencils": { "Total": 1 },
                        "CompositionBook_WideRuled": { "Total": 4 },
                        "DryEraseMarker_Fine": { "Total": 12 },
                        "Earbuds": { "Total": 1 },
                        "FacialTissue": { "Total": 3 },
                        "Folder_Blue": { "Total": 1 },
                        "Folder_Green": { "Total": 1 },
                        "Folder_Red": { "Total": 1 },
                        "Folder_Yellow": { "Total": 1 },
                        "Glue_Elmers": { "Total": 2 },
                        "GlueStick_Elmers": { "Total": 12 },
                        "Markers_Crayola": { "Total": 1 },
                        "NotebookPaper_WideRule": { "Total": 1 },
                        "PaperTowels": { "Total": 1, "Sex": "Boys" },
                        "PencilBag": { "Total": 1 },
                        "Pencils": { "Total": 72 },
                        "StorageBag_Gallon": { "Total": 1, "Sex": "Girls" }
                    },
                    "5th": {
                        "ColoredPencils": { "Total": 1 },
                        "CompositionBook_WideRuled": { "Total": 5 },
                        "Crayons_Crayola": { "Total": 1, "Sex": "Girls" },
                        "DryEraseMarker_Chisel": { "Total": 2 },
                        "EarbudAdapter": { "Total": 1 },
                        "Earbuds": { "Total": 1 },
                        "Eraser_Cap": { "Total": 1 },
                        "FacialTissue": { "Total": 3 },
                        "Folder_Green": { "Total": 1 },
                        "Folder_Purple": { "Total": 1 },
                        "Folder_Yellow": { "Total": 1 },
                        "Glue_Elmers": { "Total": 1, "Sex": "Boys" },
                        "GlueStick_Elmers": { "Total": 12 },
                        "Highlighter_Yellow": { "Total": 1 },
                        "Highlighter_Orange": { "Total": 1 },
                        "NotebookPaper_WideRule": { "Total": 1 },
                        "PencilBag": { "Total": 1 },
                        "Pencils": { "Total": 60 },
                        "PostItNotes": { "Total": 4 },
                        "Scissors_Pointed": { "Total": 1 },
                        "SpiralNotebook_Any": { "Total": 1 }
                    }
                },

                "Glen Rose ISD - Junior High": {
                    "6th": {
                        "ColoredPencils": { "Total": 1 },
                        "CompositionBook_WideRuled": { "Total": 1 },
                        "DryEraseMarker_Fine": { "Total": 4 },
                        "Earbuds": { "Total": 1 },
                        "Eraser_Pink": { "Total": 1 },
                        "Folder_Any": { "Total": 3 },
                        "Folder_Green": { "Total": 1 },
                        "GlueStick_Elmers": { "Total": 2 },
                        "Highlighter_Assorted": { "Total": 4 },
                        "NotebookPaper_WideRule": { "Total": 1 },
                        "PencilBag": { "Total": 1 },
                        "PencilSharpener": { "Total": 1 },
                        "Pencils": { "Total": 12 },
                        "Pens_Black": { "Total": 12 },
                        "RedPens": { "Total": 6 },
                        "Scissors_Pointed": { "Total": 1 },
                        "SpiralNotebook_Any": { "Total": 1 }
                    },
                    "7th": {
                        "ColoredPencils": { "Total": 2 },
                        "CompositionBook_WideRuled": { "Total": 4 },
                        "Earbuds": { "Total": 1 },
                        "Eraser_Pink": { "Total": 1 },
                        "Folder_Any": { "Total": 2 },
                        "Folder_Green": { "Total": 1 },
                        "GlueStick_Elmers": { "Total": 14 },
                        "Highlighter_Assorted": { "Total": 4 },
                        "NotebookPaper_WideRule": { "Total": 1 },
                        "PencilBag": { "Total": 1 },
                        "PencilSharpener": { "Total": 1 },
                        "Pencils": { "Total": 12 },
                        "Pens_Black": { "Total": 12 },
                        "RedPens": { "Total": 6 },
                        "Scissors_Pointed": { "Total": 1 },
                        "Tape": { "Total": 1 }
                    },
                    "8th": {
                        "ColoredPencils": { "Total": 2 },
                        "CompositionBook_WideRuled": { "Total": 3 },
                        "DryEraseMarker_Fine": { "Total": 4 },
                        "Earbuds": { "Total": 1 },
                        "Eraser_Pink": { "Total": 1 },
                        "Folder_Any": { "Total": 2 },
                        "Folder_Green": { "Total": 1 },
                        "Folder_Red": { "Total": 1 },
                        "GlueStick_Elmers": { "Total": 32 },
                        "Highlighter_Assorted": { "Total": 4 },
                        "NotebookPaper_WideRule": { "Total": 2 },
                        "PencilBag": { "Total": 1 },
                        "PencilSharpener": { "Total": 1 },
                        "Pencils": { "Total": 12 },
                        "Pens_Black": { "Total": 12 },
                        "PermanentMarker_Sharpie": { "Total": 2 },
                        "RedPens": { "Total": 6 },
                        "Scissors_Pointed": { "Total": 1 }
                    },
                    "JH SPED": {
                        "ColoredPencils": { "Total": 1 },
                        "DishLiquid": { "Total": 1 },
                        "DishwasherPods": { "Total": 1 },
                        "Eraser_Pink": { "Total": 1 },
                        "FacialTissue": { "Total": 3 },
                        "Folder_Any": { "Total": 2 },
                        "GlueStick_Elmers": { "Total": 6 },
                        "HandSoap": { "Total": 1 },
                        "LaundryDetergent": { "Total": 1 },
                        "Markers_Crayola": { "Total": 1 },
                        "PencilBag": { "Total": 1 },
                        "PencilBox": { "Total": 1 },
                        "PencilSharpener": { "Total": 1 },
                        "Scissors_Pointed": { "Total": 1 }
                    }
                },

                "Glen Rose ISD - High": {
                    "High School": {
                        "ColoredPencils": { "Total": 1 },
                        "DryEraseMarker_Fine": { "Total": 2 },
                        "Earbuds": { "Total": 1 },
                        "Eraser_Pink": { "Total": 1 },
                        "Folder_Any": { "Total": 2 },
                        "GlueStick_Elmers": { "Total": 2 },
                        "Highlighter_Assorted": { "Total": 2 },
                        "NotebookPaper_WideRule": { "Total": 1 },
                        "PencilBag": { "Total": 1 },
                        "PencilSharpener": { "Total": 1 },
                        "Pencils": { "Total": 12 },
                        "Pens_BlueOrBlack": { "Total": 12 },
                        "PermanentMarker_Sharpie": { "Total": 1 },
                        "RedPens": { "Total": 6 },
                        "Ruler": { "Total": 1 },
                        "Scissors_Pointed": { "Total": 1 },
                        "SpiralNotebook_Any": { "Total": 3 }
                    }
                }
            }
        };

        const schoolSupplies = data.SchoolSupplies || {};

        function populateSchools() {
            const schoolDropdown = document.querySelector(".schoolDropdown");

            for (let school in schoolSupplies) {
                const option = document.createElement("option");
                option.value = school;
                option.textContent = school;
                schoolDropdown.appendChild(option);
            }
        }

        function populateGrades(schoolDropdown) {
            const selectedSchool = schoolDropdown.value;
            const gradeDropdown = schoolDropdown.closest('.gradeSet').querySelector('.gradeDropdown');
            gradeDropdown.innerHTML = '<option value="">Select Grade/Class</option>';

            if (selectedSchool) {
                for (let grade in schoolSupplies[selectedSchool]) {
                    const option = document.createElement("option");
                    option.value = grade;
                    option.textContent = grade;
                    gradeDropdown.appendChild(option);
                }
            }
        }

        function generateList() {
            const gradeSets = document.querySelectorAll(".gradeSet");
            const combinedList = document.getElementById("combinedList");
            const separateLists = document.getElementById("separateLists");

            combinedList.innerHTML = '';
            separateLists.innerHTML = '';

            let combinedItems = {};
            let separateItems = {};
            let instanceCount = {};

            gradeSets.forEach((gradeSet) => {
                const schoolDropdown = gradeSet.querySelector(".schoolDropdown");
                const gradeDropdown = gradeSet.querySelector(".gradeDropdown");
                const boysInput = gradeSet.querySelector(".boysInput");
                const girlsInput = gradeSet.querySelector(".girlsInput");
                const anyInput = gradeSet.querySelector(".anyInput");

                const school = schoolDropdown.value;
                const grade = gradeDropdown.value;
                const boysCount = parseInt(boysInput.value, 10) || 0;
                const girlsCount = parseInt(girlsInput.value, 10) || 0;
                const anyCount = parseInt(anyInput.value, 10) || 0;

                if (!instanceCount[school]) {
                    instanceCount[school] = {};
                }

                ['Boys', 'Girls', 'Other'].forEach(gender => {
                    const genderCount = gender === 'Boys' ? boysCount : gender === 'Girls' ? girlsCount : anyCount;

                    if (genderCount !== 0) {
                        if (!instanceCount[school][grade]) {
                            instanceCount[school][grade] = {};
                        }
                        if (!instanceCount[school][grade][gender]) {
                            instanceCount[school][grade][gender] = 0;
                        }

                        instanceCount[school][grade][gender] += genderCount;

                        if (!separateItems[school]) {
                            separateItems[school] = {};
                        }

                        if (!separateItems[school][grade]) {
                            separateItems[school][grade] = {};
                        }
                        if (!separateItems[school][grade][gender]) {
                            separateItems[school][grade][gender] = [];
                        }

                        const supplyList = schoolSupplies[school][grade];
                        for (let itemKey in supplyList) {
                            const supplyItem = supplyList[itemKey];
                            const item = data.Items[supplyItem.Item || itemKey];

                            if (!supplyItem.Sex || supplyItem.Sex === gender || gender === 'Other') {
                                const separateItem = {
                                    text: item.Name,
                                    unit: item.Unit,
                                    quantity: supplyItem.Total * genderCount,
                                    countPerUnit: item.Count,
                                    note: supplyItem.Note || ""
                                };

                                separateItems[school][grade][gender].push(separateItem);

                                if (combinedItems[itemKey]) {
                                    combinedItems[itemKey].quantity += supplyItem.Total * genderCount;
                                    if (combinedItems[itemKey].note && supplyItem.Note) {
                                        combinedItems[itemKey].note += `, ${supplyItem.Note}`;
                                    } else if (supplyItem.Note) {
                                        combinedItems[itemKey].note = supplyItem.Note;
                                    }
                                } else {
                                    combinedItems[itemKey] = {
                                        text: item.Name,
                                        unit: item.Unit,
                                        quantity: supplyItem.Total * genderCount,
                                        countPerUnit: item.Count,
                                        note: `${supplyItem.Sex ? supplyItem.Sex + "/Other " : ""}${supplyItem.Note || ""}`
                                    };
                                }
                            }
                        }
                    }
                });
            });

            // Convert combinedItems to array of [key, value] pairs and sort by .text
            const sortedItems = Object.entries(combinedItems).sort((a, b) => {
                const textA = a[1].text.toLowerCase();
                const textB = b[1].text.toLowerCase();
                return textA.localeCompare(textB);
            });

            // Now loop through the sorted entries
            for (let [key, value] of sortedItems) {
                const listItem = document.createElement("li");
                const unit = value.unit.length > 0 && value.unit[0] ? (value.quantity > 1 ? value.unit[1] : value.unit[0]) : "";
                const note = value.note ? `- ${value.note}` : "";
                const perUnit = value.countPerUnit > 1 && unit ? `(${value.countPerUnit} per ${value.unit[0]})` : "";
                listItem.innerHTML = `<input type="checkbox"> ${value.quantity} ${unit ? unit + " of" : ""} ${value.text} ${perUnit}${note}`;
                combinedList.appendChild(listItem);
            }

            for (let school in separateItems) {
                const schoolHeading = document.createElement("h3");
                schoolHeading.innerText = school;
                separateLists.appendChild(schoolHeading);

                for (let grade in separateItems[school]) {
                    for (let gender in separateItems[school][grade]) {
                        const genderHeading = document.createElement("h4");
                        const instanceText = instanceCount[school][grade][gender] > 1 ? ` - x${instanceCount[school][grade][gender]}` : "";
                        genderHeading.innerText = `${grade} ${gender}${instanceText}`;
                        separateLists.appendChild(genderHeading);

                        const separateList = document.createElement("ul");

                        separateItems[school][grade][gender].forEach(item => {
                            const unit = item.unit.length > 0 && item.unit[0] ? (item.quantity > 1 ? item.unit[1] : item.unit[0]) : "";
                            const note = item.note ? ` - ${item.note}` : "";
                            const perUnit = item.countPerUnit > 1 && unit ? `(${item.countPerUnit} per ${item.unit[0]})` : "";
                            const listItem = document.createElement("li");
                            listItem.innerHTML = `<input type="checkbox"> ${item.quantity} ${unit ? unit + " of" : ""} ${item.text} ${perUnit}${note}`;
                            separateList.appendChild(listItem);
                        });

                        separateLists.appendChild(separateList);
                    }
                }
            }
        }

        function addGradeSet() {
            const gradeSet = document.querySelector('.gradeSet').cloneNode(true);
            gradeSet.querySelector('.schoolDropdown').value = '';
            gradeSet.querySelector('.gradeDropdown').innerHTML = '<option value="">Select Grade/Class</option>';
            gradeSet.querySelector('.boysInput').value = '0';
            gradeSet.querySelector('.girlsInput').value = '0';
            gradeSet.querySelector('.anyInput').value = '0';
            document.getElementById('gradesContainer').appendChild(gradeSet);
        }

        document.addEventListener('DOMContentLoaded', () => {
            populateSchools();

            // Set initial values to 0
            document.querySelectorAll('.boysInput, .girlsInput, .anyInput').forEach(input => {
                input.value = '0';
            });
        });
    </script>
    <style>
        /* General styling */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0 10px;
            color: #333;
        }

        h2, h3, h4 {
            background-color: #2C3E50;
            color: #ECF0F1;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 10px 5px;
            border: none;
            border-radius: 5px;
            background-color: #2980B9;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #3498DB;
        }

        /* Grades container styling */
        #gradesContainer {
            background-color: #ECF0F1;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .gradeSet {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            justify-content: center;
            gap: 15px;
            width: 100%;
            max-width: 800px;
        }

        .schoolDropdown, .gradeDropdown, .boysInput, .girlsInput, .anyInput {
            padding: 10px;
            border: 1px solid #BDC3C7;
            border-radius: 5px;
            background-color: #fff;
        }

        .gradeDropdown {
            margin-left: 0;
        }

        /* List styling */
        #separateLists, #combinedList {
            background-color: #ECF0F1;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 10px;
        }

        #combinedList {
            list-style-type: none;
            padding-left: 0;
        }

        #combinedList li {
            padding: 8px 10px;
            border-bottom: 1px solid #BDC3C7;
        }

        #combinedList li:last-child {
            border-bottom: none;
        }

        .buttonContainer {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        @media (max-width: 600px) {
            .gradeSet {
                flex-direction: column;
                align-items: center;
            }
        }
        .linksContainer {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .linksContainer a {
            text-decoration: none;
            color: #2980B9;
            font-weight: bold;
            padding: 10px 15px;
            border: 2px solid #2980B9;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
        }

        .linksContainer a:hover {
            background-color: #2980B9;
            color: #fff;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Supplies List</title>
</head>

<body>
    <h2>GRISD School Supplies List Combiner 2025-2026 - Select Classes</h2>
    <div class="linksContainer">
        <a href="https://glenroseisdtx.sites.thrillshare.com/o/gres/article/2312598" target="_blank">Elementary</a>
        <a href="https://www.grisd.net/o/gri/page/school-supplies-list" target="_blank">Intermediate</a>
        <a href="https://www.grisd.net/o/grjhs" target="_blank">Junior High</a>
        <a href="https://www.grisd.net/o/grhs" target="_blank">High</a>
    </div>
    <div class="linksContainer">
        <span style="text-align: center;">
            Enter multiple School, Grades/Classes and the number of each list you want counted to get a unified supplies list. (Other/NA shows all items)
            </br>
            This is an unofficial tool made to assist in school shopping for multiple students.
        </span>
    </div>
    <div id="gradesContainer">
        <div class="gradeSet">
            <select class="schoolDropdown" onchange="populateGrades(this)">
                <option value="">Select School</option>
                <!-- Schools will be populated dynamically -->
            </select>
            <select class="gradeDropdown">
                <option value="">Select Grade/Class</option>
                <!-- Grades will be populated dynamically -->
            </select>
            Boys:
            <input type="number" class="boysInput" min="0" value="0">
            Girls:
            <input type="number" class="girlsInput" min="0" value="0">
            Other/NA:
            <input type="number" class="anyInput" min="0" value="0">
        </div>
    </div>
    <div class="buttonContainer">
        <button onclick="addGradeSet()">+ Add Another Grade/Class</button>
        <button onclick="generateList()">Submit</button>
    </div>
    <h2>Combined Shopping List</h2>
    <ul id="combinedList"></ul>

    <h2>Individual List</h2>
    <div id="separateLists"></div>

</body>

</html>